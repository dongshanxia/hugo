<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>








<script src="/hugo/js/iconfont.js"></script>

<link rel="stylesheet" type="text/css" href="/hugo/css/other/iconfont.css">
<link rel="stylesheet" type="text/css" href="/hugo/css/other/idea.css">
<link rel="stylesheet" type="text/css" href="/hugo/css/other/syntax.css">
<link rel="stylesheet" type="text/css" href="/hugo/css/body.css">
<link rel="stylesheet" type="text/css" href="/hugo/css/header.css">
<link rel="stylesheet" type="text/css" href="/hugo/css/footer.css">
<link rel="stylesheet" type="text/css" href="/hugo/css/main.css"></head>

<div>

<div class="container slideout-panel slideout-panel-left" id="mobile-panel"><header id="header" class="header">
    <div class="logo-wrapper">
        <a href="/" class="logo">标题<i
                    style="font-size: 14px; font-family: 'Microsoft YaHei',SimSun; margin-left: 16px ;">只是为了演示</i></a>
    </div>

    <nav class="site-navbar">
        <ul id="menu" class="menu">
            
                <li class="menu-item">
                    <a class="menu-item-link" href="/hugo/">首页</a>
                </li>
            
                <li class="menu-item">
                    <a class="menu-item-link" href="/hugo/categories/">博文</a>
                </li>
            
                <li class="menu-item">
                    <a class="menu-item-link" href="/hugo/about/">关于</a>
                </li>
            

        </ul>
    </nav>
</header>







<div id="post" class="post">
    <article>
        
            
        

        <blockquote>
<p>之前使用agent，我们需要每起一个应用都cp一份agent文件，因为应用名称实在agen.config中配置的，为了避免这么麻烦，可以利用配置覆盖，使用同一个agent文件达到不同配置的目的</p>
</blockquote>
<h1 id="配置覆盖">配置覆盖</h1>
<p>默认情况下，SkyWalking为agent提供了<code>agent.config</code>配置文件。</p>
<p>配置覆盖意味着用户可以通过系统属性或agent选项覆盖配置文件中的配置。</p>
<h2 id="系统属性">系统属性</h2>
<p>使用 <code>skywalking.</code> + 配置文件中的配置名 作为系统属性的配置名来覆盖配置文件中的值。</p>
<ul>
<li>
<p>为什么需要这个前缀？</p>
<p>因为agent系统属性是和目标应用共享的，加前缀是为了避免冲突。</p>
</li>
<li>
<p>例子</p>
<p>通过下面的系统属性覆盖<code>agent.application_code</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">-Dskywalking.agent.application_code=31200
</code></pre></td></tr></table>
</div>
</div><p>实际案例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">-Dskywalking.agent.service_name<span class="o">=</span>skywalking_mysql
<span class="c1">#实际语句</span>
java -javaagent:/opt/software/skywalking/apache-skywalking-apm-bin/agent/skywalking-agent.jar -jar <span class="se">\
</span><span class="se"></span>-Dskywalking.agent.service_name<span class="o">=</span>skywalking_mysql <span class="se">\
</span><span class="se"></span>/opt/jar/mysql-boot.jar 

</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>java -javaagent:/opt/software/skywalking/apache-skywalking-apm-bin/agent/skywalking-agent.jar -jar<br>
-Dskywalking.agent.service_name=transaction1<br>
/opt/jar/transaction1.jar<br>
&ndash;PROFILE=test<br>
&ndash;server.port=8002 &amp;</p>
<p>java -javaagent:/opt/software/skywalking/apache-skywalking-apm-bin/agent/skywalking-agent.jar -jar<br>
-Dskywalking.agent.service_name=transaction2<br>
/opt/jar/transaction2.jar<br>
&ndash;PROFILE=test<br>
&ndash;server.port=8003 &amp;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">


## agent选项

在JVM参数的agent路径后面添加选项。

</code></pre></td></tr></table>
</div>
</div><p>-javaagent:/path/to/skywalking-agent.jar=[option1]=[value1],[option2]=[value2]</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
- 例子 

  通过下面的配置覆盖`agent.application_code``logging.level`。

</code></pre></td></tr></table>
</div>
</div><p>-javaagent:/path/to/skywalking-agent.jar=agent.application_code=31200,logging.level=debug</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
- 特殊字符

  如果在选项或选项值中有分隔符(`,`或者`=`)，应该用引号包起来。

</code></pre></td></tr></table>
</div>
</div><p>-javaagent:/path/to/skywalking-agent.jar=agent.ignore_suffix='.jpg,.jpeg'</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
## 系统环境变量
- 例子 

  通过下面的配置覆盖`agent.application_code`和`logging.level`。

</code></pre></td></tr></table>
</div>
</div><h1 id="the-service-name-in-ui">The service name in UI</h1>
<p>agent.service_name=${SW_AGENT_NAME:Your_ApplicationName}</p>
<h1 id="logging-level">Logging level</h1>
<p>logging.level=${SW_LOGGING_LEVEL:INFO}</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
如果 `SW_AGENT_NAME ` 环境变量在你的操作系统中已存在，并且，它的值为 `skywalking-agent-demo`，那么这里的`agent.service_name`的值将会被覆写为
`skywalking-agent-demo`, 否则, 它将会被设置成 `Your_ApplicationName`。

另外，占位符嵌套也是支持的，比如 `${SW_AGENT_NAME:${ANOTHER_AGENT_NAME:Your_ApplicationName}}`。
在这种情况下，如果 `SW_AGENT_NAME ` 环境变量不存在，但是 ```ANOTHER_AGENT_NAME``` 环境变量存在，并且它的值为 `skywalking-agent-demo`, 
那么这里的`agent.service_name`的值将会被覆写为`skywalking-agent-demo`, 否则, 它将会被设置成 `Your_ApplicationName`。

## 覆盖优先级

agent选项 &gt; 系统属性(-D) &gt; 系统环境变量 &gt; 配置文件 </code></pre></td></tr></table>
</div>
</div>
        <br />
        <div>
            
                <a href="http://127.0.0.1:1313/hugo/java/skywalking%E5%85%A5%E9%97%A8/4.skywalking%E7%9B%91%E6%8E%A7mysql/">前一页</a>
            
            
                <a href="http://127.0.0.1:1313/hugo/java/skywalking%E5%85%A5%E9%97%A8/4.skywalking%E7%9B%91%E6%8E%A7mysql/">后一页</a>
            
        </div>
    </article>
</div><footer id="footer" class="footer">
    <div class="social-links">
        <a href="http://our.dongshanxia.top:38888/"  title="gitlab">
            <svg class="icon iconfont" aria-hidden="true">
                <use xlink:href="#icon-gitlab"></use>
            </svg>
        </a>
    </div>

    <div class="copyright">




  <span class="copyright-year">
    ©
    2021 -
    2021
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">xiaozhuzhu</span>
    <span><a href="https://beian.miit.gov.cn/" target="_blank">浙ICP备18008055号</a></span>
  </span>
    </div>
</footer>

</div>
</body>

</html>